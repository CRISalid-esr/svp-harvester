from unittest import mock

import aioredis
import pytest

PICKLE_ENCODED_ASCII = b"\x80\x04\x95\xfb*\x00\x00\x00\x00\x00\x00\x8c\x0crdflib.graph\x94\x8c\x05Graph\x94\x93\x94\x8c\x1crdflib.plugins.stores.memory\x94\x8c\x06Memory\x94\x93\x94)\x81\x94}\x94(\x8c\x14_Store__node_pickler\x94N\x8c\ndispatcher\x94\x8c\rrdflib.events\x94\x8c\nDispatcher\x94\x93\x94)\x81\x94\x8c\nidentifier\x94N\x8c\x0c_Memory__spo\x94}\x94(\x8c\x0brdflib.term\x94\x8c\x06URIRef\x94\x93\x94\x8c\x1dhttp://www.sudoc.fr/070266875\x94\x85\x94R\x94}\x94(h\x13\x8c/http://www.w3.org/1999/02/22-rdf-syntax-ns#type\x94\x85\x94R\x94}\x94h\x13\x8c&http://purl.org/ontology/bibo/Document\x94\x85\x94R\x94K\x01sh\x13\x8c&http://xmlns.com/foaf/0.1/primaryTopic\x94\x85\x94R\x94}\x94h\x13\x8c http://www.sudoc.fr/070266875/id\x94\x85\x94R\x94K\x01sh\x13\x8c#http://purl.org/dc/terms/identifier\x94\x85\x94R\x94}\x94h\x11\x8c\x07Literal\x94\x93\x94\x8c\t070266875\x94NN\x87\x94R\x94K\x01sh\x13\x8c http://purl.org/dc/terms/creator\x94\x85\x94R\x94}\x94h\x13\x8c http://www.idref.fr/033702462/id\x94\x85\x94R\x94K\x01sh\x13\x8c http://purl.org/dc/terms/created\x94\x85\x94R\x94}\x94h+\x8c\n2003-03-25\x94Nh\x13\x8c%http://www.w3.org/2001/XMLSchema#date\x94\x85\x94R\x94\x87\x94R\x94K\x01sh\x13\x8c!http://purl.org/dc/terms/modified\x94\x85\x94R\x94}\x94h+\x8c\x132022-11-02T10:06:03\x94Nh\x13\x8c)http://www.w3.org/2001/XMLSchema#dateTime\x94\x85\x94R\x94\x87\x94R\x94K\x01suh\x13\x8c http://www.sudoc.fr/070266875/id\x94\x85\x94R\x94}\x94(h\x1a}\x94h\x13\x8c\"http://purl.org/ontology/bibo/Book\x94\x85\x94R\x94K\x01sh\x13\x8c0http://iflastandards.info/ns/isbd/elements/P1001\x94\x85\x94R\x94}\x94h\x13\x8c9http://iflastandards.info/ns/isbd/terms/contentform/T1009\x94\x85\x94R\x94K\x01sh\x13\x8c)http://rdaregistry.info/Elements/u/P60049\x94\x85\x94R\x94}\x94h\x13\x8c4http://rdaregistry.info/termList/RDAContentType/1020\x94\x85\x94R\x94K\x01sh\x13\x8c$http://purl.org/dc/elements/1.1/type\x94\x85\x94R\x94}\x94h+\x8c\x04Text\x94NN\x87\x94R\x94K\x01sh\x13\x8c0http://iflastandards.info/ns/isbd/elements/P1003\x94\x85\x94R\x94}\x94h\x13\x8c7http://iflastandards.info/ns/isbd/terms/mediatype/T1010\x94\x85\x94R\x94K\x01sh\x13\x8c)http://rdaregistry.info/Elements/u/P60048\x94\x85\x94R\x94}\x94h\x13\x8c4http://rdaregistry.info/termList/RDACarrierType/1049\x94\x85\x94R\x94K\x01sh\x13\x8c!http://purl.org/dc/terms/language\x94\x85\x94R\x94}\x94h\x13\x8c http://lexvo.org/id/iso639-3/fra\x94\x85\x94R\x94K\x01sh\x13\x8c+http://www.geonames.org/ontologycountryCode\x94\x85\x94R\x94}\x94h+\x8c\x02CH\x94NN\x87\x94R\x94K\x01sh\x13\x8c%http://purl.org/dc/elements/1.1/title\x94\x85\x94R\x94}\x94h+\x8c\x8eLes Cahiers du Rh\xc3\xb4ne dans la guerre (1941-1945)  : la R\xc3\xa9sistance du \"Glaive de l'Esprit\"  / par Olivier Cariguel  ; pr\xc3\xa9f. de Claire Andrieu\x94NN\x87\x94R\x94K\x01sh\x13\x8c+http://rdvocab.info/Elements/modeOfIssuance\x94\x85\x94R\x94}\x94h\x13\x8c+http://RDVocab.info/termLIst/ModeIssue/1001\x94\x85\x94R\x94K\x01sh\x13\x8c)http://rdaregistry.info/Elements/m/P30003\x94\x85\x94R\x94}\x94h\x13\x8c+http://RDVocab.info/termLIst/ModeIssue/1001\x94\x85\x94R\x94K\x01sh\x13\x8c$http://purl.org/dc/elements/1.1/date\x94\x85\x94R\x94}\x94h+\x8c\x041999\x94NN\x87\x94R\x94K\x01sh\x13\x8c)http://purl.org/dc/elements/1.1/publisher\x94\x85\x94R\x94}\x94h+\x8c)Fribourg : Universit\xc3\xa9 de Fribourg , 1999\x94NN\x87\x94R\x94K\x01sh\x13\x8c&http://purl.org/dc/elements/1.1/format\x94\x85\x94R\x94}\x94h+\x8c<1 vol. (191 p.) : ill., couv. ill., portr., fac-sim. ; 21 cm\x94NN\x87\x94R\x94K\x01sh\x13\x8c'http://purl.org/dc/elements/1.1/subject\x94\x85\x94R\x94}\x94(h+\x8c#Les Cahiers du Rh\xc3\xb4ne (p\xc3\xa9riodique)\x94NN\x87\x94R\x94K\x01h+\x8cBLitt\xc3\xa9rature fran\xc3\xa7aise -- 20e si\xc3\xa8cle -- P\xc3\xa9riodiques -- Histoire\x94NN\x87\x94R\x94K\x01h+\x8c5Guerre mondiale (1939-1945) -- Litt\xc3\xa9rature et guerre\x94NN\x87\x94R\x94K\x01h+\x8cBGuerre mondiale (1939-1945) -- Mouvements de r\xc3\xa9sistance -- France\x94NN\x87\x94R\x94K\x01h+\x8cBGuerre mondiale (1939-1945) -- Mouvements de r\xc3\xa9sistance -- Suisse\x94NN\x87\x94R\x94K\x01h+\x8c\rPersonnalisme\x94NN\x87\x94R\x94K\x01uh\x13\x8c http://purl.org/dc/terms/subject\x94\x85\x94R\x94}\x94(h\x13\x8c http://www.idref.fr/07036026X/id\x94\x85\x94R\x94K\x01h\x13\x8c http://www.idref.fr/029000394/id\x94\x85\x94R\x94K\x01h\x13\x8c http://www.idref.fr/02724640X/id\x94\x85\x94R\x94K\x01h\x13\x8c http://www.idref.fr/02726470X/id\x94\x85\x94R\x94K\x01h\x13\x8c http://www.idref.fr/028047273/id\x94\x85\x94R\x94K\x01h\x13\x8c http://www.idref.fr/027324117/id\x94\x85\x94R\x94K\x01h\x13\x8c http://www.idref.fr/027340570/id\x94\x85\x94R\x94K\x01h\x13\x8c http://www.idref.fr/027441199/id\x94\x85\x94R\x94K\x01uh\x13\x8c http://purl.org/dc/terms/spatial\x94\x85\x94R\x94}\x94(h\x13\x8c http://www.idref.fr/027226794/id\x94\x85\x94R\x94K\x01h\x13\x8c http://www.idref.fr/027249654/id\x94\x85\x94R\x94K\x01uh\x13\x8c)http://id.loc.gov/vocabulary/relators/aut\x94\x85\x94R\x94}\x94h\x13\x8c http://www.idref.fr/070266867/id\x94\x85\x94R\x94K\x01sh\x13\x8c)http://id.loc.gov/vocabulary/relators/aui\x94\x85\x94R\x94}\x94h\x13\x8c http://www.idref.fr/028261062/id\x94\x85\x94R\x94K\x01sh\x13\x8c!http://purl.org/dc/terms/isPartOf\x94\x85\x94R\x94}\x94h\x13\x8c http://www.sudoc.fr/069484805/id\x94\x85\x94R\x94K\x01sh\x13\x8c)http://rdaregistry.info/Elements/u/P60193\x94\x85\x94R\x94}\x94h\x13\x8c http://www.sudoc.fr/069484805/id\x94\x85\x94R\x94K\x01suhX}\x94(h\x1a}\x94h\x13\x8c+http://www.w3.org/2004/02/skos/core#Concept\x94\x85\x94R\x94K\x01sh\x13\x8c-http://www.w3.org/2004/02/skos/core#prefLabel\x94\x85\x94R\x94}\x94h+\x8c\x04text\x94\x8c\x02en\x94N\x87\x94R\x94K\x01suh_}\x94(h\x1a}\x94h\x13\x8c+http://www.w3.org/2004/02/skos/core#Concept\x94\x85\x94R\x94K\x01sh\x13\x8c-http://www.w3.org/2004/02/skos/core#prefLabel\x94\x85\x94R\x94}\x94h+\x8c\x04text\x94\x8c\x02en\x94N\x87\x94R\x94K\x01suhm}\x94(h\x1a}\x94h\x13\x8c+http://www.w3.org/2004/02/skos/core#Concept\x94\x85\x94R\x94K\x01sh\x13\x8c-http://www.w3.org/2004/02/skos/core#prefLabel\x94\x85\x94R\x94}\x94h+\x8c\nunmediated\x94\x8c\x02en\x94N\x87\x94R\x94K\x01suht}\x94(h\x1a}\x94h\x13\x8c+http://www.w3.org/2004/02/skos/core#Concept\x94\x85\x94R\x94K\x01sh\x13\x8c-http://www.w3.org/2004/02/skos/core#prefLabel\x94\x85\x94R\x94}\x94(h+\x8c\x06volume\x94\x8c\x02fr\x94N\x87\x94R\x94K\x01h+\x8c\x06volume\x94\x8c\x02en\x94N\x87\x94R\x94K\x01uuh\x90}\x94(h\x1a}\x94h\x13\x8c+http://www.w3.org/2004/02/skos/core#Concept\x94\x85\x94R\x94K\x01sh\x13\x8c-http://www.w3.org/2004/02/skos/core#prefLabel\x94\x85\x94R\x94}\x94h+\x8c\x0bSingle unit\x94\x8c\x02en\x94N\x87\x94R\x94K\x01suh\xef}\x94(h\x1a}\x94h\x13\x8c http://xmlns.com/foaf/0.1/Person\x94\x85\x94R\x94K\x01sh\x13\x8c\x1ehttp://xmlns.com/foaf/0.1/name\x94\x85\x94R\x94}\x94h+\x8c\x1dCariguel, Olivier (1972-....)\x94NN\x87\x94R\x94K\x01suh\xf6}\x94(h\x1a}\x94h\x13\x8c http://xmlns.com/foaf/0.1/Person\x94\x85\x94R\x94K\x01sh\x13\x8c\x1ehttp://xmlns.com/foaf/0.1/name\x94\x85\x94R\x94}\x94h+\x8c)Andrieu, Claire (1952-.... ; historienne)\x94NN\x87\x94R\x94K\x01suh\xfd}\x94(h\x1a}\x94h\x13\x8c$http://purl.org/ontology/bibo/Series\x94\x85\x94R\x94K\x01sh\x13\x8c.http://purl.org/dc/terms/bibliographicCitation\x94\x85\x94R\x94}\x94h+\x8c\x8cAux sources du temps pr\xc3\xa9sent  / dir. par Francis Python / [Fribourg] : Chaire d'histoire contemporaine de l'Universit\xc3\xa9 de Fribourg , 1996-\x94NN\x87\x94R\x94K\x01suu\x8c\x0c_Memory__pos\x94}\x94(h\x1a}\x94(h\x1e}\x94h\x16K\x01shQ}\x94hLK\x01sj\t\x01\x00\x00}\x94(hXK\x01h_K\x01hmK\x01htK\x01h\x90K\x01ujN\x01\x00\x00}\x94(h\xefK\x01h\xf6K\x01ujf\x01\x00\x00}\x94h\xfdK\x01suh!}\x94h%}\x94h\x16K\x01ssh(}\x94h.}\x94h\x16K\x01ssh1}\x94h5}\x94h\x16K\x01ssh8}\x94h?}\x94h\x16K\x01sshB}\x94hI}\x94h\x16K\x01ssj\x0c\x01\x00\x00}\x94(j\x11\x01\x00\x00}\x94(hXK\x01h_K\x01uj+\x01\x00\x00}\x94hmK\x01sj8\x01\x00\x00}\x94htK\x01sj<\x01\x00\x00}\x94htK\x01sjI\x01\x00\x00}\x94h\x90K\x01suhT}\x94hX}\x94hLK\x01ssh[}\x94h_}\x94hLK\x01sshb}\x94hf}\x94hLK\x01sshi}\x94hm}\x94hLK\x01sshp}\x94ht}\x94hLK\x01sshw}\x94h{}\x94hLK\x01ssh~}\x94h\x82}\x94hLK\x01ssh\x85}\x94h\x89}\x94hLK\x01ssh\x8c}\x94h\x90}\x94hLK\x01ssh\x93}\x94h\x97}\x94hLK\x01ssh\x9a}\x94h\x9e}\x94hLK\x01ssh\xa1}\x94h\xa5}\x94hLK\x01ssh\xa8}\x94h\xac}\x94hLK\x01ssh\xaf}\x94(h\xb3}\x94hLK\x01sh\xb6}\x94hLK\x01sh\xb9}\x94hLK\x01sh\xbc}\x94hLK\x01sh\xbf}\x94hLK\x01sh\xc2}\x94hLK\x01suh\xc5}\x94(h\xc9}\x94hLK\x01sh\xcc}\x94hLK\x01sh\xcf}\x94hLK\x01sh\xd2}\x94hLK\x01sh\xd5}\x94hLK\x01sh\xd8}\x94hLK\x01sh\xdb}\x94hLK\x01sh\xde}\x94hLK\x01suh\xe1}\x94(h\xe5}\x94hLK\x01sh\xe8}\x94hLK\x01sujQ\x01\x00\x00}\x94(jU\x01\x00\x00}\x94h\xefK\x01sja\x01\x00\x00}\x94h\xf6K\x01suh\xeb}\x94h\xef}\x94hLK\x01ssh\xf2}\x94h\xf6}\x94hLK\x01ssji\x01\x00\x00}\x94jm\x01\x00\x00}\x94h\xfdK\x01ssh\xf9}\x94h\xfd}\x94hLK\x01ssj\x00\x01\x00\x00}\x94j\x04\x01\x00\x00}\x94hLK\x01ssu\x8c\x0c_Memory__osp\x94}\x94(h\x1e}\x94h\x16}\x94h\x1aK\x01ssh%}\x94h\x16}\x94h!K\x01ssh.}\x94h\x16}\x94h(K\x01ssh5}\x94h\x16}\x94h1K\x01ssh?}\x94h\x16}\x94h8K\x01sshI}\x94h\x16}\x94hBK\x01sshQ}\x94hL}\x94h\x1aK\x01ssj\t\x01\x00\x00}\x94(hX}\x94h\x1aK\x01sh_}\x94h\x1aK\x01shm}\x94h\x1aK\x01sht}\x94h\x1aK\x01sh\x90}\x94h\x1aK\x01suj\x11\x01\x00\x00}\x94(hX}\x94j\x0c\x01\x00\x00K\x01sh_}\x94j\x19\x01\x00\x00K\x01suhX}\x94hL}\x94hTK\x01ssh_}\x94hL}\x94h[K\x01sshf}\x94hL}\x94hbK\x01ssj+\x01\x00\x00}\x94hm}\x94j&\x01\x00\x00K\x01sshm}\x94hL}\x94hiK\x01ssj8\x01\x00\x00}\x94ht}\x94j3\x01\x00\x00K\x01ssj<\x01\x00\x00}\x94ht}\x94h\x13\x8c-http://www.w3.org/2004/02/skos/core#prefLabel\x94\x85\x94R\x94K\x01ssht}\x94hL}\x94hpK\x01ssh{}\x94hL}\x94hwK\x01ssh\x82}\x94hL}\x94h~K\x01ssh\x89}\x94hL}\x94h\x85K\x01ssjI\x01\x00\x00}\x94h\x90}\x94jD\x01\x00\x00K\x01ssh\x90}\x94hL}\x94(h\x8cK\x01h\x93K\x01ush\x9e}\x94hL}\x94h\x9aK\x01ssh\xa5}\x94hL}\x94h\xa1K\x01ssh\xac}\x94hL}\x94h\xa8K\x01ssh\xb3}\x94hL}\x94h\xafK\x01ssh\xc9}\x94hL}\x94h\xc5K\x01ssh\xb6}\x94hL}\x94h\x13\x8c'http://purl.org/dc/elements/1.1/subject\x94\x85\x94R\x94K\x01ssh\xcc}\x94hL}\x94h\x13\x8c http://purl.org/dc/terms/subject\x94\x85\x94R\x94K\x01ssh\xcf}\x94hL}\x94h\x13\x8c http://purl.org/dc/terms/subject\x94\x85\x94R\x94K\x01ssh\xd2}\x94hL}\x94h\x13\x8c http://purl.org/dc/terms/subject\x94\x85\x94R\x94K\x01ssh\xb9}\x94hL}\x94h\x13\x8c'http://purl.org/dc/elements/1.1/subject\x94\x85\x94R\x94K\x01ssh\xd5}\x94hL}\x94h\x13\x8c http://purl.org/dc/terms/subject\x94\x85\x94R\x94K\x01ssh\xd8}\x94hL}\x94h\x13\x8c http://purl.org/dc/terms/subject\x94\x85\x94R\x94K\x01ssh\xbc}\x94hL}\x94h\x13\x8c'http://purl.org/dc/elements/1.1/subject\x94\x85\x94R\x94K\x01ssh\xdb}\x94hL}\x94h\x13\x8c http://purl.org/dc/terms/subject\x94\x85\x94R\x94K\x01ssh\xe5}\x94hL}\x94h\xe1K\x01ssh\xbf}\x94hL}\x94h\x13\x8c'http://purl.org/dc/elements/1.1/subject\x94\x85\x94R\x94K\x01ssh\xe8}\x94hL}\x94h\x13\x8c http://purl.org/dc/terms/spatial\x94\x85\x94R\x94K\x01ssh\xc2}\x94hL}\x94h\x13\x8c'http://purl.org/dc/elements/1.1/subject\x94\x85\x94R\x94K\x01ssh\xde}\x94hL}\x94h\x13\x8c http://purl.org/dc/terms/subject\x94\x85\x94R\x94K\x01ssjN\x01\x00\x00}\x94(h\xef}\x94h\x1aK\x01sh\xf6}\x94h\x1aK\x01sujU\x01\x00\x00}\x94h\xef}\x94jQ\x01\x00\x00K\x01ssh\xef}\x94hL}\x94h\xebK\x01ssja\x01\x00\x00}\x94h\xf6}\x94j]\x01\x00\x00K\x01ssh\xf6}\x94hL}\x94h\xf2K\x01ssjf\x01\x00\x00}\x94h\xfd}\x94h\x1aK\x01ssjm\x01\x00\x00}\x94h\xfd}\x94ji\x01\x00\x00K\x01ssh\xfd}\x94hL}\x94(h\xf9K\x01j\x00\x01\x00\x00K\x01usu\x8c\x12_Memory__namespace\x94}\x94(\x8c\x05brick\x94h\x13\x8c%https://brickschema.org/schema/Brick#\x94\x85\x94R\x94\x8c\x04csvw\x94h\x13\x8c\x1ahttp://www.w3.org/ns/csvw#\x94\x85\x94R\x94\x8c\x02dc\x94h\x13\x8c http://purl.org/dc/elements/1.1/\x94\x85\x94R\x94\x8c\x04dcat\x94h\x13\x8c\x1ahttp://www.w3.org/ns/dcat#\x94\x85\x94R\x94\x8c\x08dcmitype\x94h\x13\x8c\x1chttp://purl.org/dc/dcmitype/\x94\x85\x94R\x94\x8c\x07dcterms\x94h\x13\x8c\x19http://purl.org/dc/terms/\x94\x85\x94R\x94\x8c\x04dcam\x94h\x13\x8c\x18http://purl.org/dc/dcam/\x94\x85\x94R\x94\x8c\x04doap\x94h\x13\x8c\x1dhttp://usefulinc.com/ns/doap#\x94\x85\x94R\x94\x8c\x04foaf\x94h\x13\x8c\x1ahttp://xmlns.com/foaf/0.1/\x94\x85\x94R\x94\x8c\x03geo\x94h\x13\x8c%http://www.opengis.net/ont/geosparql#\x94\x85\x94R\x94\x8c\x04odrl\x94h\x13\x8c\x1chttp://www.w3.org/ns/odrl/2/\x94\x85\x94R\x94\x8c\x03org\x94h\x13\x8c\x19http://www.w3.org/ns/org#\x94\x85\x94R\x94\x8c\x04prof\x94h\x13\x8c\x1dhttp://www.w3.org/ns/dx/prof/\x94\x85\x94R\x94\x8c\x04prov\x94h\x13\x8c\x1ahttp://www.w3.org/ns/prov#\x94\x85\x94R\x94\x8c\x02qb\x94h\x13\x8c!http://purl.org/linked-data/cube#\x94\x85\x94R\x94\x8c\x06schema\x94h\x13\x8c\x13https://schema.org/\x94\x85\x94R\x94\x8c\x02sh\x94h\x13\x8c\x1bhttp://www.w3.org/ns/shacl#\x94\x85\x94R\x94\x8c\x04skos\x94h\x13\x8c$http://www.w3.org/2004/02/skos/core#\x94\x85\x94R\x94\x8c\x04sosa\x94h\x13\x8c\x1ahttp://www.w3.org/ns/sosa/\x94\x85\x94R\x94\x8c\x03ssn\x94h\x13\x8c\x19http://www.w3.org/ns/ssn/\x94\x85\x94R\x94\x8c\x04time\x94h\x13\x8c\x1chttp://www.w3.org/2006/time#\x94\x85\x94R\x94\x8c\x04vann\x94h\x13\x8c\x1bhttp://purl.org/vocab/vann/\x94\x85\x94R\x94\x8c\x04void\x94h\x13\x8c\x18http://rdfs.org/ns/void#\x94\x85\x94R\x94\x8c\x03wgs\x94h\x13\x8c)https://www.w3.org/2003/01/geo/wgs84_pos#\x94\x85\x94R\x94\x8c\x03owl\x94h\x13\x8c\x1ehttp://www.w3.org/2002/07/owl#\x94\x85\x94R\x94\x8c\x03rdf\x94h\x13\x8c+http://www.w3.org/1999/02/22-rdf-syntax-ns#\x94\x85\x94R\x94\x8c\x04rdfs\x94h\x13\x8c%http://www.w3.org/2000/01/rdf-schema#\x94\x85\x94R\x94\x8c\x03xsd\x94h\x13\x8c!http://www.w3.org/2001/XMLSchema#\x94\x85\x94R\x94\x8c\x03xml\x94h\x13\x8c$http://www.w3.org/XML/1998/namespace\x94\x85\x94R\x94\x8c\x04bibo\x94h\x13\x8c\x1ehttp://purl.org/ontology/bibo/\x94\x85\x94R\x94\x8c\x08rdafrbr1\x94h\x13\x8c)http://rdvocab.info/RDARelationshipsWEMI/\x94\x85\x94R\x94\x8c\x07marcrel\x94h\x13\x8c&http://id.loc.gov/vocabulary/relators/\x94\x85\x94R\x94\x8c\x02gr\x94h\x13\x8c!http://purl.org/goodrelations/v1#\x94\x85\x94R\x94\x8c\x04isbd\x94h\x13\x8c+http://iflastandards.info/ns/isbd/elements/\x94\x85\x94R\x94\x8c\x08rdafrbr2\x94h\x13\x8c/http://RDVocab.info/uri/schema/FRBRentitiesRDA/\x94\x85\x94R\x94\x8c\x0brdaelements\x94h\x13\x8c\x1dhttp://rdvocab.info/Elements/\x94\x85\x94R\x94\x8c\x04rdac\x94h\x13\x8c#http://rdaregistry.info/Elements/c/\x94\x85\x94R\x94\x8c\x04rdau\x94h\x13\x8c#http://rdaregistry.info/Elements/u/\x94\x85\x94R\x94\x8c\x04rdaw\x94h\x13\x8c#http://rdaregistry.info/Elements/w/\x94\x85\x94R\x94\x8c\x04rdae\x94h\x13\x8c#http://rdaregistry.info/Elements/e/\x94\x85\x94R\x94\x8c\x04rdam\x94h\x13\x8c#http://rdaregistry.info/Elements/m/\x94\x85\x94R\x94\x8c\x04rdai\x94h\x13\x8c#http://rdaregistry.info/Elements/i/\x94\x85\x94R\x94\x8c\x05sudoc\x94h\x13\x8c\x17http://www.sudoc.fr/ns/\x94\x85\x94R\x94\x8c\x08bnf-onto\x94h\x13\x8c%http://data.bnf.fr/ontology/bnf-onto/\x94\x85\x94R\x94\x8c\x05fabio\x94h\x13\x8c\x1bhttp://purl.org/spar/fabio/\x94\x85\x94R\x94\x8c\x02gn\x94h\x13\x8c http://www.geonames.org/ontology\x94\x85\x94R\x94u\x8c\x0f_Memory__prefix\x94}\x94(jY\x02\x00\x00jV\x02\x00\x00j]\x02\x00\x00jZ\x02\x00\x00ja\x02\x00\x00j^\x02\x00\x00je\x02\x00\x00jb\x02\x00\x00ji\x02\x00\x00jf\x02\x00\x00jm\x02\x00\x00jj\x02\x00\x00jq\x02\x00\x00jn\x02\x00\x00ju\x02\x00\x00jr\x02\x00\x00jy\x02\x00\x00jv\x02\x00\x00j}\x02\x00\x00jz\x02\x00\x00j\x81\x02\x00\x00j~\x02\x00\x00j\x85\x02\x00\x00j\x82\x02\x00\x00j\x89\x02\x00\x00j\x86\x02\x00\x00j\x8d\x02\x00\x00j\x8a\x02\x00\x00j\x91\x02\x00\x00j\x8e\x02\x00\x00j\x95\x02\x00\x00j\x92\x02\x00\x00j\x99\x02\x00\x00j\x96\x02\x00\x00j\x9d\x02\x00\x00j\x9a\x02\x00\x00j\xa1\x02\x00\x00j\x9e\x02\x00\x00j\xa5\x02\x00\x00j\xa2\x02\x00\x00j\xa9\x02\x00\x00j\xa6\x02\x00\x00j\xad\x02\x00\x00j\xaa\x02\x00\x00j\xb1\x02\x00\x00j\xae\x02\x00\x00j\xb5\x02\x00\x00j\xb2\x02\x00\x00j\xb9\x02\x00\x00j\xb6\x02\x00\x00j\xbd\x02\x00\x00j\xba\x02\x00\x00j\xc1\x02\x00\x00j\xbe\x02\x00\x00j\xc5\x02\x00\x00j\xc2\x02\x00\x00j\xc9\x02\x00\x00j\xc6\x02\x00\x00j\xcd\x02\x00\x00j\xca\x02\x00\x00j\xd1\x02\x00\x00j\xce\x02\x00\x00j\xd5\x02\x00\x00j\xd2\x02\x00\x00j\xd9\x02\x00\x00j\xd6\x02\x00\x00j\xdd\x02\x00\x00j\xda\x02\x00\x00j\xe1\x02\x00\x00j\xde\x02\x00\x00j\xe5\x02\x00\x00j\xe2\x02\x00\x00j\xe9\x02\x00\x00j\xe6\x02\x00\x00j\xed\x02\x00\x00j\xea\x02\x00\x00j\xf1\x02\x00\x00j\xee\x02\x00\x00j\xf5\x02\x00\x00j\xf2\x02\x00\x00j\xf9\x02\x00\x00j\xf6\x02\x00\x00j\xfd\x02\x00\x00j\xfa\x02\x00\x00j\x01\x03\x00\x00j\xfe\x02\x00\x00j\x05\x03\x00\x00j\x02\x03\x00\x00j\t\x03\x00\x00j\x06\x03\x00\x00j\r\x03\x00\x00j\n\x03\x00\x00u\x8c\x18_Memory__context_obj_map\x94}\x94\x8c'BNode:N085581e974cc4341a983af12bf215649\x94h\x02h\x06h\x11\x8c\x05BNode\x94\x93\x94\x8c!N085581e974cc4341a983af12bf215649\x94\x85\x94R\x94\x86\x94R\x94s\x8c\x17_Memory__tripleContexts\x94}\x94\x8c\x17_Memory__contextTriples\x94}\x94(N\x8f\x94(hLj,\x02\x00\x00h\xdb\x87\x94hLhwh{\x87\x94h\x16h\x1ah\x1e\x87\x94hLj8\x02\x00\x00h\xe8\x87\x94hLh~h\x82\x87\x94hLhihm\x87\x94hLh\xebh\xef\x87\x94htj3\x01\x00\x00j8\x01\x00\x00\x87\x94hLj\x18\x02\x00\x00h\xb9\x87\x94h\xefh\x1ajN\x01\x00\x00\x87\x94h\xfdji\x01\x00\x00jm\x01\x00\x00\x87\x94h\x16h!h%\x87\x94hXj\x0c\x01\x00\x00j\x11\x01\x00\x00\x87\x94hLh\xa1h\xa5\x87\x94hLh[h_\x87\x94h\x16h8h?\x87\x94hLj\x04\x02\x00\x00h\xb6\x87\x94hLh\xafh\xb3\x87\x94hLh\x8ch\x90\x87\x94h\xf6j]\x01\x00\x00ja\x01\x00\x00\x87\x94hmh\x1aj#\x01\x00\x00\x87\x94hLh\xc5h\xc9\x87\x94hLh\xf2h\xf6\x87\x94hLhThX\x87\x94h\x16hBhI\x87\x94hLh\xf9h\xfd\x87\x94h\x16h1h5\x87\x94hLh\xa8h\xac\x87\x94hLj\x0e\x02\x00\x00h\xcf\x87\x94hLj\t\x02\x00\x00h\xcc\x87\x94h\xf6h\x1ajZ\x01\x00\x00\x87\x94h_h\x1aj\x16\x01\x00\x00\x87\x94hLj\x1d\x02\x00\x00h\xd5\x87\x94htj\xe9\x01\x00\x00j<\x01\x00\x00\x87\x94h\x16h(h.\x87\x94hLj=\x02\x00\x00h\xc2\x87\x94hmj&\x01\x00\x00j+\x01\x00\x00\x87\x94hLj\x00\x01\x00\x00j\x04\x01\x00\x00\x87\x94hLh\x85h\x89\x87\x94hLh\xe1h\xe5\x87\x94h\xefjQ\x01\x00\x00jU\x01\x00\x00\x87\x94hLh\x93h\x97\x87\x94h\x90jD\x01\x00\x00jI\x01\x00\x00\x87\x94h\xfdh\x1ajf\x01\x00\x00\x87\x94hLj\x13\x02\x00\x00h\xd2\x87\x94hLhbhf\x87\x94hLjB\x02\x00\x00h\xde\x87\x94hLhpht\x87\x94hLj'\x02\x00\x00h\xbc\x87\x94hth\x1aj0\x01\x00\x00\x87\x94hLj3\x02\x00\x00h\xbf\x87\x94hLh\x1ahQ\x87\x94h\x90h\x1ajA\x01\x00\x00\x87\x94h_j\x19\x01\x00\x00j\x1e\x01\x00\x00\x87\x94hLh\x9ah\x9e\x87\x94hLj\"\x02\x00\x00h\xd8\x87\x94hXh\x1aj\t\x01\x00\x00\x87\x94\x90j\x12\x03\x00\x00\x8f\x94(j\x1f\x03\x00\x00j \x03\x00\x00j!\x03\x00\x00j\"\x03\x00\x00j#\x03\x00\x00j$\x03\x00\x00j%\x03\x00\x00j&\x03\x00\x00j'\x03\x00\x00j(\x03\x00\x00j)\x03\x00\x00j*\x03\x00\x00j+\x03\x00\x00j,\x03\x00\x00j-\x03\x00\x00j.\x03\x00\x00j/\x03\x00\x00j0\x03\x00\x00j1\x03\x00\x00j2\x03\x00\x00j3\x03\x00\x00j4\x03\x00\x00j5\x03\x00\x00j6\x03\x00\x00j7\x03\x00\x00j8\x03\x00\x00j9\x03\x00\x00j:\x03\x00\x00j;\x03\x00\x00j<\x03\x00\x00j=\x03\x00\x00j>\x03\x00\x00j?\x03\x00\x00j@\x03\x00\x00jA\x03\x00\x00jB\x03\x00\x00jC\x03\x00\x00jD\x03\x00\x00jE\x03\x00\x00jF\x03\x00\x00jG\x03\x00\x00jH\x03\x00\x00jI\x03\x00\x00jJ\x03\x00\x00jK\x03\x00\x00jL\x03\x00\x00jM\x03\x00\x00jN\x03\x00\x00jO\x03\x00\x00jP\x03\x00\x00jQ\x03\x00\x00jR\x03\x00\x00jS\x03\x00\x00jT\x03\x00\x00jU\x03\x00\x00jV\x03\x00\x00jW\x03\x00\x00\x90u\x8c\x15_Memory__all_contexts\x94\x8f\x94(j\x19\x03\x00\x00\x90\x8c\x18_Memory__defaultContexts\x94}\x94(j\x12\x03\x00\x00\x89N\x89uubj\x17\x03\x00\x00\x86\x94R0j\x19\x03\x00\x00."


@pytest.fixture(name="redis_cache_get_mock")
def fixture_redis_cache_get_mock():
    async def fake_redis_get(name: str):
        """
        Fake redis get
        :param name: name
        :return: fake value
        """

        if name == "sudoc_publications:https://www.sudoc.fr/070266875.rdf":
            return PICKLE_ENCODED_ASCII
        return None

    return fake_redis_get


@pytest.fixture(name="redis_cache_set_mock")
def fixture_redis_cache_set_mock():
    async def fake_redis_set(name: str, value: bytes):
        """
        Fake redis set
        :param name: name
        :param value: value
        :return: None
        """
        pass

    return fake_redis_set


@pytest.fixture(name="redis_cache_expire_mock")
def fixture_redis_cache_expire_mock():
    async def fake_redis_expire(name: str, time: int):
        """
        Fake redis expire
        :param name: name
        :param expiration_time: expiration time
        :return: None
        """
        pass

    return fake_redis_expire


@pytest.fixture(name="redis_cache_mock", autouse=True)
def fixture_redis_cache_mock(
    redis_cache_get_mock, redis_cache_set_mock, redis_cache_expire_mock
):
    """RDF resolver mock to detect fetch method calls."""
    with mock.patch.object(aioredis.Redis, "get") as mock_get, mock.patch.object(
        aioredis.Redis, "set"
    ) as mock_set, mock.patch.object(aioredis.Redis, "expire") as mock_expire:
        mock_get.side_effect = redis_cache_get_mock
        mock_set.side_effect = redis_cache_set_mock
        mock_expire.side_effect = redis_cache_expire_mock
        yield mock_get, mock_set
